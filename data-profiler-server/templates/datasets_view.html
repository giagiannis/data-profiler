{{ define "title" }}
{{ if .  }}
{{ .Name }} page
{{else}}
Dataset Not Found
{{end}}
{{ end }}

{{ define "body" }}
{{ if .  }}
<h1>{{ .Name }}</h1>
<div>
<h2>Details</h2>
<table class='tablelist'>
<tr><th>Path</th><td>{{.Path}}</td></tr>
<tr><th>Description</th><td>{{.Description}}</td></tr>
</table>
</div>
<div>
<h2>Files</h2>
{{ if .Files }}
<code style='width:800px;'>
<ul style='column-count:4;'>
{{ range $id, $f := .Files }}
<li style='width:50%;'><a href='/download/?type=datafile&id={{ $.ID }}&name={{ $f }}'>{{ $f }}</a></li>
{{ end }}
</ul>
</code>


{{ else }}
No files found
{{ end }}
</div>

<div>
<h2>Similarity Matrices
<button title="Estimate a new Similarity Matrix" style='height:30px;' class="ui-button ui-widget ui-corner-all ui-button-icon-only" onclick="createPopup('/datasets/{{ $.ID}}/newsm', 'Estimate new Similarity Matrix');"> <span class="ui-icon ui-icon-plusthick" ></span></button>
</h2>
{{ if $.Matrices }}
<table class='tablelist'>
		<tr><th>Filename</th><th>Configuration</th><th>Actions</th></tr>
{{ range $i, $m := $.Matrices }}
<tr>
		<td><a href='/download/?type=sm&id={{ $m.ID }}&name={{ $m.Filename }}'>{{$m.Filename}}</a></td>
		<td>
				<ul>
				{{ range $k, $v := $m.Configuration}}
				{{ if $v }}
				<li> {{ $k  }}  : {{ $v }}</li>
				{{ end }}
				{{ end}}
				</ul>
		</td>
		<td>
				<button title="Visualize Similarity Matrix" class="ui-button ui-widget ui-corner-all" 
						onclick="window.location.href='/sm/{{ $m.ID }}/visual/'">
					<img src='/static/visualize.png' width=30/></a>
				</button>
				<br/>
				<button title="Transform SM to an Euclidean space" class="ui-button ui-widget ui-corner-all" 
						onclick="createPopup('/mds/{{ $m.ID }}/run/?datasetID={{$.ID}}', 'Transform SM to an Euclidean space')">
					<img src='/static/transform.png' width=30/></a>
				</button>
				<br/>
			<button title="Show coordinates" class="ui-button ui-widget ui-corner-all" 
						onclick="createPopup('/coords/{{ $m.ID }}/', 'Dataset coordinates')">
					<img src='/static/coordinates.png' width=30/></a>
				</button>

				<br/>
				<button title="Delete Similarity Matrix" class="ui-button ui-widget ui-corner-all" style='background:#aa0000;' 
						onclick="window.location.href='/sm/{{ $m.ID }}/delete/?datasetID={{$.ID}}'">
					<img src='/static/delete.png' width=30/></a>
				</button>
		</td>
</tr>
{{ end }}
</table>
{{ else }}
No similarity matrices found
{{ end }}
</div>


<div>
<h2>Operators
<button title="Insert a new operator for this dataset" style='height:30px;' class="ui-button ui-widget ui-corner-all ui-button-icon-only" onclick="createPopup('/datasets/{{ $.ID}}/newop', 'Insert operator');"> <span class="ui-icon ui-icon-plusthick" ></span></button>
</h2>
{{ if .Operators }}
<table class='tablelist'>
<tr>
		<th>Name</th>
		<th>Description</th>
		<th>Actions</th>
</tr>
{{ range $k, $v := .Operators }}
<tr>
		<td><a href='/download/?type=operator&id={{$v.ID}}&name={{$v.Name}}'>{{$v.Name}}</a></td>
		<td>{{$v.Description}}</td>
		<td>
		<button title="Evaluate the operator's scores" class="ui-button ui-widget ui-corner-all" 
		onclick="window.location.href='/operator/{{ $v.ID }}/run/'">
		<img src='/static/play.png' width=30/></a>
		</button>
		<br/>

		{{ if .Scores }}
		{{ range $i, $s := $v.Scores }}
		<button title="Evaluate the operator's scores" class="ui-button ui-widget ui-corner-all" 
		onclick="window.location.href='/download/?type=scores&id={{$s.ID}}&name={{$s.Filename}}'">
		<img src='/static/download.png' width=30/></a>
		</button>
		{{ end}}
		<br/>
		{{ end}}

		<button title="Delete Operator" class="ui-button ui-widget ui-corner-all" style='background:#aa0000;' 
		onclick="window.location.href='/operator/{{ $v.ID }}/delete/?datasetID={{$.ID}}'">
		<img src='/static/delete.png' width=30/></a>
		</button>
		</td>
</tr>
{{ end }}
</table>

{{ else }}
No operators found
{{ end }}
</div>


{{else}}
<h1>Dataset Not Found</h1>
{{end}}
{{ end }}
{{ template "base.html" . }}
